<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
	Remove this if you use the .htaccess -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="description" content="" />
	<title>Myspace-FileUpload</title>
	<link href="css/base.css" rel="stylesheet" type="text/css">
	<link href="css/common.css" rel="stylesheet" type="text/css">
	<link href="css/file.css" rel="stylesheet" type="text/css">
	<script type="text/javascript" src="js/jQuery-1.7.min.js"></script>
    <script type="text/javascript" src="js/jQuery.Atom.js"></script>
	<script type="text/javascript" src="js/jQuery.UI.js"></script>
	<script type="text/javascript" src="js/UI.js"></script>
	<!–[if lt IE 9]> <script src="js/html5.js"></script>
	<![endif]–>
</head>
<body>
<!--  S=file  -->
<article id="fileUploadMain">
	<!--   
     onDragEnter=" event.stopPropagation(); event.preventDefault();" ondragover="event.stopPropagation(); event.preventDefault();" ondrop="event.stopPropagation(); event.preventDefault(); dropFile(event);"
     onDragEnter="document.getElementById('fileUploadMain').style.width='50px'; event.stopPropagation(); event.preventDefault();"
    ondragover="event.stopPropagation(); event.preventDefault();"
    ondrop="document.getElementById('fileUploadMain').style.width='200px'; event.stopPropagation(); event.preventDefault(); dropFile(event)"-->

</article>
<div id="Show"></div>
<!--  E=file  -->
<script>
if ( typeof FileReader === 'undefined' ) {
		alert( " 您的浏览器未实现 FileReader 接口 " );
} else {
			var reader = new FileReader();
		// do sth.
}

function stopPrevent(e){
	e.stopPropagation();
	e.preventDefault();
}


var imgDropBox =  document.getElementById('fileUploadMain');
imgDropBox.addEventListener("dragenter",stopPrevent, false);
imgDropBox.addEventListener("dragover", stopPrevent, false);
imgDropBox.addEventListener("drop", function(e){
	e.stopPropagation();
	e.preventDefault();
	//alert("drop");
	var fileReader = new FileReader();
	var file =e.dataTransfer.files;
	
	fileReader.onloadend = function(){
		//alert("js-ok");
		//alert(this.readyState);console.log(this.result); // (0,1,2 :)读取完成回调函数，数据保存在result中
		//fileReader.readAsBinaryString(file[0]);
		//console.log(fileReader, file.fileName, file.FileSize);
		//console.log(file);
		//console.log(file.fileName);
		//console.log(file.fileSize);
		
		//console.log(fileReader, file[0].fileName, file[0].fileSize);
		//console.log(file[0]);
		console.log(this.result);
		//console.log(fileReader);
		
	}
	fileReader.readAsBinaryString(file[0]);
	console.log(fileReader);
}, false);


//	jQuery.event.props.push("dataTransfer");
//	$("#fileUploadMain").bind('drop', fileDrop).bind('dragenter', fileEnter).bind('dragover', fileOver).bind('dragleave', fileLeave);
//	//$(document).bind('drop', fileDrop).bind('dragenter', fileEnter).bind('dragover', fileOver).bind('dragleave', fileLeave);
//	function fileEnter(){
//		$("#fileUploadMain").css("background", "#000");
//		event.stopPropagation();
//		event.preventDefault();
//		return false;
//	}
//	function fileOver(){
//		event.stopPropagation();
//		event.preventDefault();
//		return false;
//	}
//	function fileDrop(event){
//		//alert("js-ok");
//		event.stopPropagation();
//		event.preventDefault();
//		$("#fileUploadMain").css("background", "#fff");
//		var fileReader = new FileReader();
//		var dt = event.dataTransfer;
//		var files = dt.files;
//		var files_count = files.length;
//
//		fileReader.onloadend = function(){
//			//alert(this.readyState);console.log(this.result); // (0,1,2 :)读取完成回调函数，数据保存在result中
//			//console.log(fileReader, file.fileName, file.FileSize);
//			//console.log(file);
//			//console.log(file.fileName);
//			//console.log(file.fileSize);		
//			fileReader.readAsBinaryString(files[0]);
//			console.log(this.result);
//		}
//		
//		//alert(files[0].fileSize);
//		console.log(binaryString);
//
//		return false;
//	}
//	function fileLeave(){
//		$("#fileUploadMain").css("background", "#fff");
//		event.stopPropagation();
//		event.preventDefault();
//		return false;
//	}
</script>
</body>
</html>
